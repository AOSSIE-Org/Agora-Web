@(user: Option[models.User], election : models.Election)(implicit request: RequestHeader, messages: Messages)


@import helper._
@import b3.vertical.fieldConstructor  // Declares a vertical field constructor as default


@algo = @{List("Range Voting","Instant Runoff 2-round","Egalitarian","Majority","Borda","Approval","Nanson",
                "Kemeny-Young","Schulze","Copeland","SMC","Ranked Pairs","Random Ballot","Coombâ€™s","Contingent Method",
                "Minimax Condorcet","Top Cycle","Uncovered Set","Warren STV","Meek STV","Oklahoma Method",
                "Sequential Proportional Approval voting","Proportional Approval voting","Satisfaction Approval voting",
                "Baldwin","Exhaustive ballot","Exhaustive ballot with dropoff","Scottish STV","Cumulative voting",
                "Preferential block voting","Contingent Method")
}

@booleanResult = @{List("false","true")}

@voterVisibility = @{ Map("Private" -> "false", "Public" -> "true") }

@ballotVisibility = @{List("Public","Visible","Hidden")}

@import java.lang.String; var str=""
@import java.text.SimpleDateFormat; val curTimeFormat = new SimpleDateFormat("MM/dd/yyyy")




@main(Messages("home.title"), user) {

    <div class="container centered">
        <div class="well">
            <h1>Create a new election</h1>
        </div>
    </div>
    <div class="container">
      <div class="container">
<div class="stepwizard">
    <div class="stepwizard-row setup-panel">
        <div class="stepwizard-step">
            <a href="#step-1" type="button" class="btn btn-primary btn-circle" disabled>1</a>
            <p>Step 1</p>
        </div>
        <div class="stepwizard-step">
            <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled>2</a>
            <p>Step 2</p>
        </div>
        <div class="stepwizard-step">
            <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled>3</a>
            <p>Step 3</p>
        </div>
    </div>
</div>

    @b3.form(CSRF(routes.ElectionController.update())) {
      <input type="hidden" value='@election.id' name="id" >
        <div class="row setup-content" id="step-1">
        <div class="col-xs-12">
            <div class="col-md-12">
                <div class="form-group">
                  <label for="exampleInputEmail1">Election Name</label>
                  <input type="text" value='@election.name'class="form-control" name="name" placeholder="Election Name" required>
                </div>
                <div class="form-group">
                  <label for="exampleInputEmail1">Description</label>
                  <input type="text" class="form-control"  value='@election.description' name="description" placeholder="Description" required>
                </div>

                @if(user == None) {
                <div class="form-group">
                  <label for="exampleInputEmail1">Creator Name</label>
                  <input type="text" class="form-control" value='@election.creatorName' name="creatorName" placeholder="Creator name" required>
                </div>
                <div class="form-group">
                  <label for="exampleInputEmail1">Creator Email</label>
                  <input type="text" class="form-control" value='@election.creatorEmail' name="creatorEmail" placeholder="Creator email" required>
                </div>
              }else{
                <div class="form-group">
                  <label for="exampleInputEmail1">Ballot visibility</label>
                  <select value='@election.ballotVisibility' class="selectpicker form-control" name="ballotVisibility">
                    @for(value <- ballotVisibility){
                    <option value=@value>@value</option>
                  }
                  </select>

                </div>
              }
                <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Next</button>
            </div>
        </div>
    </div>
    <div class="row setup-content" id="step-2">
        <div class="col-xs-12">
            <div class="col-md-12">
                <div class="form-group">
                  <label for="exampleInputEmail1">Candidates</label>

                  @for(e <- election.candidates){
                    @{str = str + e + ","}
                  }
                   <input type="text" value=@str class="form-control taginput" name="candidates" data-role="tagsinput" required />
                </div>

                  @if(user == None) {
                <div class="form-group">
                  <label for="exampleInputEmail1">Voting Preference</label>
                  <select value='@election.ballotVisibility' class="selectpicker form-control" name="ballotVisibility">
                    @for(value <- ballotVisibility){
                    <option value=@value>@value</option>
                  }
                  </select>

                </div>
              }

                <div class="form-group">
                  <label class="control-label" for="date">Start</label>
                  <input class="form-control" value='@curTimeFormat.format(election.start)' id="date" name="start" placeholder="MM/DD/YYY" type="text"/>
                </div>
                <div class="form-group">
                  <label for="exampleInputEmail1">End</label>
                  <input class="form-control" value='@curTimeFormat.format(election.end)' id="date" name="end" placeholder="MM/DD/YYY" type="text"/>
                </div>

                <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Next</button>
            </div>
        </div>
    </div>
    <div class="row setup-content" id="step-3">
        <div class="col-xs-12">
            <div class="col-md-12">
                <div class="form-group">

                    <label for="exampleInputEmail1">Invite Voters</label>
                    <select value='@election.isInvite' class="selectpicker form-control" name="isInvite">
                      @for(value <- booleanResult){
                      <option value='@value'>@value</option>
                    }
                    </select>
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail1">Voter list visibility</label>
                    <select value='@election.voterListVisibility' class="selectpicker form-control" name="voterListVisibility">
                      @for(value <- voterVisibility.keySet){
                      <option value=@voterVisibility(value)>@value</option>
                    }
                    </select>
                </div>
                <div class="form-group">
                  <label for="exampleInputEmail1">Realtime Result</label>
                  <select value='@election.realtimeResult' class="selectpicker form-control" name="realtimeResult">
                    @for(value <- booleanResult){
                    <option value='@value'>@value</option>
                  }
                  </select>
                </div>
                <div class="form-group">
                  <label for="exampleInputEmail1">Voting Algorithm</label>
                  <select value='@election.votingAlgo' class="selectpicker form-control" name="votingAlgo">

                    @for(value <- algo){
                        <option value='@value'>@value</option>
                    }


                  </select>

                  @if(user != None) {
                <input type="hidden" value='@election.creatorEmail' class="form-control" name="creatorEmail" value=@user.get.email>
                <input type="hidden" value='@election.creatorName' class="form-control" name="creatorName" value=@user.get.name>
              }
                </div>
                <button class="btn btn-success btn-lg pull-right" type="submit">Finish!</button>
            </div>
        </div>
    </div>

                    }
                </div>
            </section>
           </div>
        </div>

        <br>
        <br>
        <br>
        <br>


        <script type='text/javascript' src='@routes.Assets.at("/javascripts/editElection.js")'> </script>


    </div>
}
