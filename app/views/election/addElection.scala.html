@(user: Option[models.User])(implicit request: RequestHeader, messages: Messages)


@import helper._
@import b3.vertical.fieldConstructor  // Declares a vertical field constructor as default


@algo = @{List("Range Voting","Instant Runoff 2-round","Egalitarian","Majority","Borda","Approval","Nanson",
                "Kemeny-Young","Schulze","Copeland","SMC","Ranked Pairs","Random Ballot","Coombâ€™s","Contingent Method",
                "Minimax Condorcet","Top Cycle","Uncovered Set","Warren STV","Meek STV","Oklahoma Method",
                "Sequential Proportional Approval voting","Proportional Approval voting","Satisfaction Approval voting",
                "Baldwin","Exhaustive ballot","Exhaustive ballot with dropoff","Scottish STV","Cumulative voting",
                "Preferential block voting","Contingent Method")
}

@booleanResult = @{List("false","true")}

@voterVisibility = @{ Map("Private" -> "false", "Public" -> "true") }

@ballotVisibility = @{List("Public","Visible","Hidden")}

@main(Messages("home.title"), user) {
  <div class="container">
    <div class="container centered">
        <div class="well">
            <h1>Create a new election</h1>
        </div>
    </div>
    <div>
      <div class="container">
        <div class="stepwizard">
            <div class="stepwizard-row setup-panel">
                <div class="stepwizard-step">
                    <a href="#step-1" type="button" class="btn btn-primary btn-circle" disabled>1</a>
                    <p>Basic Settings</p>
                </div>
                <div class="stepwizard-step">
                    <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled>2</a>
                    <p>Details</p>
                </div>
                <div class="stepwizard-step">
                    <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled>3</a>
                    <p>Privacy</p>
                </div>
            </div>
        </div>
        @if(user==None){
          @b3.form(CSRF(routes.ElectionController.createGuest())) {
            <div class="row setup-content" id="step-1">
              <div class="col-xs-12">
                <div class="col-md-12">
                  <div class="form-group">
                    <label for="exampleInputEmail1">Election Name</label>
                    <input type="text" class="form-control" name="name" placeholder="Election Name" required>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1">Description</label>
                    <input type="text" class="form-control"  name="description" placeholder="Description" required>
                  </div>
                  <div class="form-group">
                    <label class="control-label" for="date">Start</label>
                    <input class="form-control" id="date" name="start" placeholder="MM/DD/YYY" type="text"/>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1">End</label>
                    <input class="form-control" id="date" name="end" placeholder="MM/DD/YYY" type="text"/>
                  </div>
                    <div class="form-group">
                      <label for="exampleInputEmail1">Creator Name</label>
                      <input type="text" class="form-control" name="creatorName" placeholder="Creator name" required>
                    </div>
                    <div class="form-group">
                      <label for="exampleInputEmail1">Creator Email</label>
                      <input type="text" class="form-control" name="creatorEmail" placeholder="Creator email" required>
                    </div>
                    <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Next</button>
                  </div>
              </div>
          </div>
          <div class="row setup-content" id="step-2">
          <div class="col-xs-12">
            <div class="col-md-12">
              <div class="form-group">
                <label for="exampleInputEmail1">Candidates</label>
                <input type="text" class="form-control taginput" name="candidates" data-role="tagsinput" required />
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Voting Algorithm</label>
                <select class="selectpicker form-control" name="votingAlgo">
                  @for(value <- algo){
                    <option value='@value'>@value</option>
                  }
                </select>
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Realtime Result</label>
                <select class="selectpicker form-control" name="realtimeResult">
                  @for(value <- booleanResult){
                    <option value='@value'>@value</option>
                }
                </select>
              </div>
              <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Next</button>
            </div>
          </div>
          </div>
          <div class="row setup-content" id="step-3">
          <div class="col-xs-12">
            <div class="col-md-12">
              <div class="form-group">
                <label for="exampleInputEmail1">Ballot visibility</label>
                <select class="selectpicker form-control" name="ballotVisibility">
                  @for(value <- ballotVisibility){
                    <option value=@value>@value</option>
                }
                </select>
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Invite Voters</label>
                <select class="selectpicker form-control" name="isInvite">
                  @for(value <- booleanResult){
                    <option value='@value'>@value</option>
                  }
                </select>
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Voter list visibility</label>
                <select class="selectpicker form-control" name="voterListVisibility">
                  @for(value <- voterVisibility.keySet){
                    <option value=@voterVisibility(value)>@value</option>
                  }
                </select>
              </div>
              <button class="btn btn-success btn-lg pull-right" type="submit">Finish!</button>
            </div>
          </div>
          </div>
          }
        }

        @if(user!=None){
          @b3.form(CSRF(routes.ElectionController.create())) {
            <div class="row setup-content" id="step-1">
              <div class="col-xs-12">
                <div class="col-md-12">
                  <div class="form-group">
                    <label for="exampleInputEmail1">Election Name</label>
                    <input type="text" class="form-control" name="name" placeholder="Election Name" required>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1">Description</label>
                    <input type="text" class="form-control"  name="description" placeholder="Description" required>
                  </div>
                  <div class="form-group">
                    <label class="control-label" for="date">Start</label>
                    <input class="form-control" id="date" name="start" placeholder="MM/DD/YYY" type="text"/>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1">End</label>
                    <input class="form-control" id="date" name="end" placeholder="MM/DD/YYY" type="text"/>
                  </div>
                    <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Next</button>
                  </div>
              </div>
          </div>
          <div class="row setup-content" id="step-2">
          <div class="col-xs-12">
            <div class="col-md-12">
              <div class="form-group">
                <label for="exampleInputEmail1">Candidates</label>
                <input type="text" class="form-control taginput" name="candidates" data-role="tagsinput" required />
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Voting Algorithm</label>
                <select class="selectpicker form-control" name="votingAlgo">
                  @for(value <- algo){
                    <option value='@value'>@value</option>
                  }
                </select>
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Realtime Result</label>
                <select class="selectpicker form-control" name="realtimeResult">
                  @for(value <- booleanResult){
                    <option value='@value'>@value</option>
                }
                </select>
              </div>
              <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Next</button>
            </div>
          </div>
          </div>
          <div class="row setup-content" id="step-3">
          <div class="col-xs-12">
            <div class="col-md-12">
              <div class="form-group">
                <label for="exampleInputEmail1">Ballot visibility</label>
                <select class="selectpicker form-control" name="ballotVisibility">
                  @for(value <- ballotVisibility){
                    <option value=@value>@value</option>
                }
                </select>
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Invite Voters</label>
                <select class="selectpicker form-control" name="isInvite">
                  @for(value <- booleanResult){
                    <option value='@value'>@value</option>
                  }
                </select>
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">Voter list visibility</label>
                <select class="selectpicker form-control" name="voterListVisibility">
                  @for(value <- voterVisibility.keySet){
                    <option value=@voterVisibility(value)>@value</option>
                  }
                </select>
              </div>
              <input type="hidden" class="form-control" name="creatorEmail" value=@user.get.email>
              <input type="hidden" class="form-control" name="creatorName" value=@user.get.name>
              <button class="btn btn-success btn-lg pull-right" type="submit">Finish!</button>
            </div>
          </div>
          </div>
          }
        }
      </div>
    </div>
  </div>
  <br>
  <br>
  <br>
  <br>
  <script type='text/javascript' src='@routes.Assets.at("/javascripts/addElection.js")'> </script>
</div>
}
